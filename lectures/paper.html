<section>
    <h2>A reproducible paper</h2>
    <h3 style="margin-top: 0.5em">
        Vaclav (Vashek) Petras</h3>
    <p class="title-foot">
        <a href="http://www.ncsu.edu/" title="North Carolina State University">NCSU</a>
        <a href="http://geospatial.ncsu.edu/osgeorel/" title="NCSU GeoForAll Lab">GeoForAll Lab</a>
        at the
        <a href="http://geospatial.ncsu.edu/" title="Center for Geospatial Analytics">Center for Geospatial Analytics</a>
        <br>
        North Carolina State University
    </p>
    <p>
        NCSU GIS 610-003/603: Tools for open geospatial science<br>
        November 8, 2017
    </p>
</section>


<section>
<h2>Publishing research</h2>
<img src="img/philosophical_transactions_vol_1_239_242.png" class="stretch box-glow">
<p class="credit glow">
    The Particulars. Of Those Observations of the Planet Mars,
    Formerly Intimated to Have Been Made at London in
    the Months of February and March A. 1665/6. (1665).
    Philosophical Transactions (1665-1678), 1, 239-242.
    Retrieved from <a href="http://www.jstor.org/stable/101500">JSTOR</a>
</p>
</section>


<section>
<h2>Publishing goals</h2>
<ul>
    <li>registration <small>so that scientists get credit</small>
    <li>archiving <small>so that we preserve knowledge for the future</small>
    <li>dissemination <small>so that people can use this knowledge</small>
    <li>peer review <small>so that we know it's worth it</small>
</ul>
</section>


<section>
<h2>Open Science</h2>

<img src="img/spectrum_of_reproducible_research.png" class="stretch">
<small>[Buckheit and Donoho 1995, Peng 2011, Rodríguez-Sánchez et al. 2016, Marwick 2016]</small>
<p class="credit">
    Image credit: CC BY-SA Comtebenoit,
    <a href="https://commons.wikimedia.org/wiki/File:Spectrum_of_reproducible_research.png">Wikimedia</a>
<!--
J. Buckheit and D. L. Donoho. Wavelets and Statistics, chapter Wavelab and reproducible research.
Springer-Verlag, Berlin, New York, 1995.
(paraphrased/pseudo-quote Jon Claerbout of Stanford)
An article about computational science in a scientific publication
is not the scholarship itself, it is merely advertising of the scholarship.
The actual scholarship is the complete software development environment
and the complete set of instructions which generated the figures.

Peng, R. D. (2011). Reproducible research in computational science.
Science, 334(6060), 1226-1227.
DOI: 10.1126/science.1213847

Rodríguez-Sánchez, F., Bartomeus, I., Varela, S., Pérez-Luque, A.J.,
Ciencia reproducible: qué, por qué, cómoEcosistemas [en linea] 2016, 25
(Mayo-Agosto) : [Fecha de consulta: 4 de abril de 2017]
Disponible en:<http://www.redalyc.org/articulo.oa?id=54046745011>
ISSN 1132-6344

Marwick, B. (2016). Computational reproducibility in archaeological research:
basic principles and a case study of their implementation.
Journal of Archaeological Method and Theory, 1-27.
DOI: 10.1007/s10816-015-9272-9
-->
</p>
</section>


<!--Software solutions for software problem-->


<section>
    <h2>Text</h2>
    <p>
        If the paper source format is LaTeX or other markup,
        the figures, tables, or even bigger parts can be generated using
        scripts and automatically included.
    </p>
    <p>
        If the paper source format is Jupyter Notebook or other notebook-like format,
        everything including text, figures, and code is at one place
        included in the final document.
    </p>
    <img src="img/petras2017generalized_paper.png" class="stretch box-glow">
</section>


<section>
<h2>Collaborative writing</h2>
Overleaf, Authorea, ...
<br>
combined with Git
<img src="img/overleaf.png" class="stretch box-glow">
</section>


<section>
<h2>Scripting the process</h2>

Bash and GRASS GIS
<pre class="bash" style="font-size: x-large;"><code>r.in.lidar input=points.las output=elevation -e
</code></pre>
Python and GRASS GIS
<pre class="python" style="font-size: x-large;"><code>from grass.script import run_command
run_command("r.in.lidar", input="points.las", output="elevation", flags="e")
</code></pre>
R and GRASS GIS
<pre class="python" style="font-size: x-large;"><code>library(rgrass7)
execGRASS("r.in.lidar", input="points.las", output="elevation", flags="e")
</code></pre>
<!--
We can use Python and other languages to access powerful software features in an automated way instead
of hoping we entered the same values as last time when rerunning the analysis with a new climate dataset.
-->
</section>


<section>
<h2>Computational notebooks</h2>
<ul>
    <li>interactive document with text, code, and figures
    <li>languages: Python, R, Bash, C, C++, Octave, ...
    <li>Jupyter Notebook, R Markdown (Notebook), Emacs Org-mode, ...
</ul>
<img src="img/jupyter.png" class="stretch box-glow">
<!-- Jupyter and R Markdown let us track the reasoning behind our experiments and analyses. -->
</section>


<section>
<h2>Publishing code</h2>

<img src="img/spatio-temporal-countour-evolution_code.png" class="stretch">
</section>
<!--A terrain modeling paper will serve as an example of sharing a full description
of a published method.-->

<section>
    <h2>Published computational research</h2>
    <p>FUTURES - urban-rural landscape patterns simulation</p>
    <p>model implemented as a set of GRASS GIS addon modules</p>
    <p><em>r.futures.pga, r.futures.demand, r.futures.parallelpga, ...</em></p>
    <img src="img/futures.jpg" class="stretch">
</section>

<section>
<h3 style="margin-top: 3ex; margin-bottom: 3ex">FUTURES: Text</h3>
<img src="img/futures_paper.png" class="stretch">
<!-- A landscape change model will be used to demonstrate reusable research. -->
</section>

<section>
<h3>FUTURES: Source code</h3>
<img src="img/futures_src.png" class="stretch">
</section>

<section>
<h3>FUTURES: Source code history</h3>
<img src="img/futures_log.png" class="stretch">
</section>

<section>
<h3>FUTURES: Documentation</h3>
<img src="img/futures_doc.png" class="stretch">
</section>


<section>
<h3>FUTURES: Graphical user interface</h3>
<img src="img/futures_gui.png" class="stretch box-glow">
</section>


<section>
<h2>Integration into a larger project</h2>
<ul>
    <li>Maintenance and common features
    <li>Preprocessing, visualization, and user interface (GUI, CLI, API)
    <li>Integration with existing analytical tools
    <li>Inputs, outputs, memory management
    <li>Options: GRASS GIS module, R package, Python package, QGIS plugin, ...
</ul>
<p>
<img src="img/grass_gis_addons_index.png" width=100>
</section>


<section>
<h2>Environment to run the code</h2>
<ul>
    <li>dependencies
    <li>environmental settings
    <li>file structure
    <li>Solutions: Docker, Vagrant, virtual machines ...
</ul>
</section>


<section>
<h2>File versions</h2>

<img src="img/file_versions.png" class="stretch box-glow">
</section>


<section>
<h2>Revision control</h2>
Git (<code>git</code>), Subversion (<code>svn</code>), Mercurial (<code>hg</code>), ...
<!--
collaborate and keep track
of our constantly evolving methods and R scripts.
-->
<br>
<img src="img/revisions.svg" class="stretch">
<pre class="bash" style="font-size: x-large;"><code>git commit script.py -m "replaced part of the main equation"
</code></pre>
</section>


<section>
<h2>Research publication</h2>
<table class="row-based">
    <tr>
        <td>Text</td>
        <td>
            background, methods, results, discussion<td>
            <small>PDF, HTML</small>
        </td>
    </tr>
    <tr>
        <td>Data</td>
        <td>
            methods as GRASS GIS modules<td>
            <small>open formats, *</small>
        </td>
    </tr>
    <tr>
        <td>Reusable&nbsp;code</td>
        <td>
            generally and reusably implemented methods<td>
            <small>Python, R, C</small>
        </td>
    </tr>
    <tr>
        <td>Specific&nbsp;code</td>
        <td>
            scripts to generate results<td>
            <small>Bash, Python, R, *</small>
        </td>
    </tr>
    <tr>
        <td>Environment</td>
        <td>
            details about all dependencies and the code<td>
            <small>Docker, Vagrant</small>
        </td>
    </tr>
    <tr>
        <td>Versions</td>
        <td>
            repository with current and previous versions<td>
            <small>Git, Mercurial</small>
        </td>
    </tr>
</table>
<p>
    * Potentially included in computational notebooks such as Jupyter Notebook
</p>
<img src="img/spectrum_of_reproducible_research.png" class="stretch box-glow">
<p class="credit glow">
    Image credit: CC BY-SA Comtebenoit,
    <a href="https://commons.wikimedia.org/wiki/File:Spectrum_of_reproducible_research.png">Wikimedia</a>
</p>
</section>


<section>
<h2>Motivation</h2>
<ul>
    <li>Am I doing science to publish journal papers or to advance knowledge?
    <li>What happens when I need to rerun an analysis from last year?
    <li>How can my collaborators run and improve the code I'm running?
</ul>
</section>


<section>
<h2>Like irreproducibility more?</h2>
<img src="img/top_tips_to_make_your_research_irreproducible.png" class="stretch box-glow">
</section>


<section>
<h2>Further Resources</h2>
<div class="left">
<h3>Data Carpentry</h3>
<ul>
    <li>Building communities teaching universal data literacy
    <li><a href="http://datacarpentry.org">datacarpentry.org</a>
</ul>
<br>
<center>
<img src="img/logos/data_carpentry.png" style="height: 8ex;">
</center>
</div>
<div class="right">
<h3>Software Carpentry</h3>
<ul>
    <li>Teaching basic lab skills for research computing
    <li><a href="http://software-carpentry.org">software-carpentry.org</a>
</ul>
<br>
<center>
<img src="img/logos/software_carpentry.png" style="height: 8ex;">
</center>
</div>
</section>
